<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="/styles/style.css" />
		<link rel="icon" href="/assets/favicon.svg" type="image/svg+xml" />
		<title>Crystall-Project test area</title>
	</head>
	<body>
		<div class="main-wrap">
			<main class="main">
				<header class="main-header">
					<h1 class="main-header-label">
						<span class="main-header-label__logo"></span>
						<span class="main-header-label__wording">Crystall-project test page</span>
					</h1>
					<nav class="main-header-nav">
						<li class="main-header-nav__item">
							<a class="_link" href="/" target="_self">На главную</a>
						</li>
						<li class="main-header-nav__item">
							<a class="_link">CellAuto</a>
							<a class="_link">Orbit</a>
						</li>
					</nav>
				</header>
				<div class="main-content">
					<aside class="main-sidebar">
						<div class="main-sidebar-item" id="meta-socket"></div>
					</aside>
					<div class="main-content__list" id="content-socket"></div>
				</div>
			</main>
		</div>
		<footer class="main-footer">
			test-mode NodeJs homepage
		</footer>
		<script type="module">
			'use strict'
			import { createArticle } from '/script_client/renderer.mjs'
			import { getArticleContent } from '/script_client/content_loaders.mjs'
			{
				document.addEventListener('DOMContentLoaded', async () => {
					const articleId = window.location.pathname.split('/').pop()
					const content = await getArticleContent(articleId)

					const previewSocket = document.getElementById('content-socket')
					const metaSocket = document.getElementById('meta-socket')

					const { articleHTML, metaHTML } = createArticle(JSON.parse(content))
					previewSocket.innerHTML = articleHTML
					metaSocket.innerHTML = metaHTML
				})
			}
		</script>
	</body>
</html>